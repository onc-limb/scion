# configサブコマンド実装TODO

## コマンド基本実装
- [ ] configコマンドのハンドラー実装
- [ ] サブサブコマンドの実装
  - [ ] `get`サブコマンド
  - [ ] `set`サブコマンド
  - [ ] `list`サブコマンド
  - [ ] `reset`サブコマンド
  - [ ] `edit`サブコマンド
- [ ] フラグの実装
  - [ ] `--global`フラグ
  - [ ] `--local`フラグ
  - [ ] `--help`フラグ

## 設定ファイル管理
- [ ] グローバル設定ファイルパス管理
  - [ ] `~/.config/scion/config.toml`
  - [ ] XDG Base Directory対応
- [ ] ローカル設定ファイルパス管理
  - [ ] `.scion/config.toml`
  - [ ] ディレクトリ作成処理
- [ ] 設定ファイルの読み込み処理
- [ ] 設定ファイルの書き込み処理
- [ ] TOMLパース/シリアライズ

## 設定構造体
- [ ] 完全な設定構造体の定義
  ```go
  type Config struct {
      Repository RepositoryConfig
      Worktree   WorktreeConfig
      Git        GitConfig
      UI         UIConfig
      Editor     EditorConfig
  }
  ```
- [ ] デフォルト値の定義
- [ ] バリデーションルール

## Get機能実装
- [ ] キーのドット記法パース
  - [ ] ネストされた値へのアクセス
  - [ ] 配列要素へのアクセス検討
- [ ] 値の取得処理
- [ ] 設定優先順位の適用
  - [ ] ローカル > グローバル > デフォルト
- [ ] 存在しないキーのエラー処理

## Set機能実装
- [ ] キーのドット記法パース
- [ ] 値の型変換
  - [ ] string, bool, intのサポート
  - [ ] 型チェック機能
- [ ] 設定の更新処理
- [ ] ファイルへの保存
- [ ] バリデーション処理
- [ ] 部分更新の実装（既存設定の保持）

## List機能実装
- [ ] 全設定の取得
- [ ] 階層的な表示フォーマット
- [ ] 設定の出所表示（global/local）
- [ ] オーバーライド状況の表示
- [ ] JSONフォーマット出力オプション

## Reset機能実装
- [ ] 単一設定のリセット
- [ ] 全設定のリセット
- [ ] 確認プロンプト
  - [ ] インタラクティブモード
  - [ ] `--force`オプション
- [ ] デフォルト値への復元
- [ ] バックアップ機能検討

## Edit機能実装
- [ ] エディタの検出
  - [ ] `$EDITOR`環境変数
  - [ ] 設定ファイルの`editor.command`
  - [ ] デフォルトエディタ（vi）
- [ ] 一時ファイルの作成
- [ ] エディタの起動
- [ ] 保存後のバリデーション
- [ ] エラー時のロールバック

## 設定の優先順位管理
- [ ] 優先順位システムの実装
  1. コマンドラインフラグ
  2. 環境変数（SCION_*）
  3. ローカル設定
  4. グローバル設定
  5. デフォルト値
- [ ] 環境変数のサポート
  - [ ] SCION_WORKTREE_BASE_DIR等
  - [ ] 環境変数のパース

## バリデーション
- [ ] 設定値の型チェック
- [ ] 値の範囲チェック
- [ ] パスの存在確認
- [ ] Git関連設定の妥当性確認
- [ ] カスタムバリデータの実装

## 自動補完機能
- [ ] 設定キーの補完候補生成
- [ ] bash/zsh補完スクリプト生成
- [ ] 既存値の表示

## エラーハンドリング
- [ ] 無効なキーエラー
- [ ] 型不一致エラー
- [ ] ファイル読み書きエラー
- [ ] パース/シリアライズエラー
- [ ] エディタ起動失敗エラー

## テスト
- [ ] get機能のテスト
- [ ] set機能のテスト
- [ ] list機能のテスト
- [ ] reset機能のテスト
- [ ] edit機能のテスト
- [ ] 優先順位のテスト
- [ ] バリデーションテスト
- [ ] ファイルI/Oのテスト